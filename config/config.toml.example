# qtrade 配置文件
# 复制此文件为 config/config.toml 并按需修改

[general]
# 日志级别: trace, debug, info, warn, error
log_level = "info"

[data_source]
# 数据源类型: "accessibility" (macOS AX API) | "openapi" (FutuOpenD) | "ocr" (截图+Vision OCR)
source = "ocr"
# 数据刷新间隔（秒）
refresh_interval_secs = 2

[futu]
# 富途牛牛本地数据路径（留空则自动检测）
# data_path = "/Users/xxx/Library/Containers/cn.futu.Niuniu/Data/Library/Application Support"
# 指定用户 ID（留空则自动选择最近活跃的）
# user_id = "27148251"
# FutuOpenD 连接地址（仅 openapi 模式需要）
opend_host = "127.0.0.1"
opend_port = 11111

[alerts]
# 是否启用提醒
enabled = true
# 冷却时间（秒），同一规则在此时间内不重复触发
cooldown_secs = 300
# 涨跌幅提醒阈值 (%)（当 change_thresholds 未设置时使用）
change_threshold_pct = 3.0
# 多级涨跌幅阈值 (%)，每级各报一次
change_thresholds = [3.0, 5.0, 7.0, 10.0]
# Webhook URL（支持飞书/Slack）
# webhook_url = "https://open.feishu.cn/open-apis/bot/v2/hook/xxx"

[ui]
# 表格每页显示行数
page_size = 50
# 是否显示技术指标列
show_indicators = true

[analysis]
# 是否启用日K线分析（需 FutuOpenD 连接）
daily_kline_enabled = true
# 日K线获取天数（需 >= 120 以满足 MA60 + MACD 预热）
daily_kline_days = 120
# 日K线刷新间隔（分钟），0 表示仅启动时获取
daily_kline_refresh_minutes = 30
# Tick 信号阈值
vwap_deviation_pct = 2.0
vwap_reset_pct = 1.0
rapid_move_pct = 1.0
rapid_move_window = 5
rapid_move_reset_pct = 0.5      # 急涨急跌重置阈值 (%)
rapid_move_efficiency = 0.6     # 急涨急跌方向效率 (0-1)
rapid_move_min_change = 0.05    # 急涨急跌最低绝对变动 (元)
amplitude_breakout_pct = 5.0
volume_spike_ratio = 3.0
tick_signal_display_minutes = 5
warmup_ticks = 3                # 启动预热 tick 数（前 N 个 tick 不产生信号/提醒）
